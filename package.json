{
  "name": "krarkode",
  "displayName": "krarkode",
  "description": "Ark-focused VS Code extension",
  "version": "0.0.1",
  "publisher": "tttpob",
  "engines": {
    "vscode": "^1.75.0"
  },
  "categories": [
    "Programming Languages",
    "Other"
  ],
  "activationEvents": [
    "onLanguage:r",
    "onLanguage:rmd",
    "onCommand:krarkode.createArkSession",
    "onCommand:krarkode.attachArkSession",
    "onCommand:krarkode.openArkConsole",
    "onCommand:krarkode.stopArkSession",
    "onCommand:krarkode.restartArkLanguageServer"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "krarkode.createArkSession",
        "title": "Create Ark Session",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.attachArkSession",
        "title": "Attach Ark Session",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.openArkConsole",
        "title": "Open Ark Console",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.stopArkSession",
        "title": "Stop Ark Session",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.restartArkLanguageServer",
        "title": "Restart Ark Language Server",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.runSelection",
        "title": "Run Selection/Line",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.runSelectionRetainCursor",
        "title": "Run Selection/Line (Retain Cursor)",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.runSource",
        "title": "Source File",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.runSourceWithEcho",
        "title": "Source File with Echo",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.runFromLineToEnd",
        "title": "Run From Line To End",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.runFromBeginningToLine",
        "title": "Run From Beginning To Line",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.nrow",
        "title": "nrow()",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.length",
        "title": "length()",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.head",
        "title": "head()",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.thead",
        "title": "t(head())",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.names",
        "title": "names()",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.view",
        "title": "View()",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.plot.previous",
        "title": "Previous Plot",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.plot.next",
        "title": "Next Plot",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.plot.save",
        "title": "Save Current Plot",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.plot.openInBrowser",
        "title": "Open Plot in Browser",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.plot.clear",
        "title": "Clear Plot History",
        "category": "Krarkode"
      }
    ],
    "keybindings": [
      {
        "command": "krarkode.runSelection",
        "key": "ctrl+enter",
        "mac": "cmd+enter",
        "when": "editorTextFocus && editorLangId == r"
      },
      {
        "command": "krarkode.runSelection",
        "key": "ctrl+enter",
        "mac": "cmd+enter",
        "when": "editorTextFocus && editorLangId == rmd"
      },
      {
        "command": "krarkode.runSource",
        "key": "ctrl+shift+s",
        "mac": "cmd+shift+s",
        "when": "editorTextFocus && editorLangId == r"
      }
    ],
    "configuration": {
      "type": "object",
      "title": "Krarkode",
      "properties": {
        "krarkode.ark.path": {
          "type": "string",
          "default": "ark",
          "description": "Path to the Ark executable. Leave empty to use PATH."
        },
        "krarkode.ark.sessionMode": {
          "type": "string",
          "default": "console",
          "enum": [
            "console",
            "notebook",
            "background"
          ],
          "description": "Ark session mode to use when starting the kernel."
        },
        "krarkode.ark.sessionsDir": {
          "type": "string",
          "default": "",
          "markdownDescription": "Root directory for Ark session metadata (connection file, announce file). Leave empty to use extension global storage."
        },
        "krarkode.ark.console.driver": {
          "type": "string",
          "default": "tmux",
          "enum": [
            "tmux",
            "external"
          ],
          "description": "Ark kernel driver. Use \"tmux\" to manage Ark kernels in a shared tmux session, or \"external\" for manual kernel management."
        },
        "krarkode.ark.console.commandTemplate": {
          "type": "string",
          "default": "jupyter console --existing {connectionFile}",
          "description": "Command template used to launch a console attached to an Ark connection file."
        },
        "krarkode.ark.kernel.commandTemplate": {
          "type": "string",
          "default": "{arkPath} --connection_file {connectionFile} --session-mode {sessionMode} --startup-file {startupFile}",
          "description": "Command template used to launch an Ark kernel."
        },
        "krarkode.ark.kernel.startupFileTemplate": {
          "type": "string",
          "default": "{sessionsDir}/{name}/init-ark.R",
          "description": "Template for the Ark startup file path."
        },
        "krarkode.ark.lsp.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Whether to start the Ark language server sidecar."
        },
        "krarkode.ark.ipAddress": {
          "type": "string",
          "default": "127.0.0.1",
          "description": "IP address Ark will bind for the language server."
        },
        "krarkode.ark.lspTimeoutMs": {
          "type": "number",
          "default": 15000,
          "description": "Timeout for Ark language server startup (ms)."
        },
        "krarkode.ark.sidecarPath": {
          "type": "string",
          "default": "",
          "description": "Path to the Ark sidecar executable. Leave empty to use bundled binaries."
        },
        "krarkode.ark.sidecarTimeoutMs": {
          "type": "number",
          "default": 30000,
          "description": "Timeout for sidecar operations (ms)."
        },
        "krarkode.ark.tmux.path": {
          "type": "string",
          "default": "tmux",
          "description": "Path to tmux executable. Leave empty to use PATH."
        },
        "krarkode.ark.tmux.manageKernel": {
          "type": "boolean",
          "default": true,
          "description": "Whether to launch Ark kernel inside tmux when creating a session."
        },
        "krarkode.r.rBinaryPath": {
          "type": "string",
          "default": "",
          "markdownDescription": "Path to an R executable to launch R background processes. Must be \"vanilla\" R, not radian etc.! Some variables defined in <https://code.visualstudio.com/docs/editor/variables-reference> such as `${userHome}`, `${workspaceFolder}`, `${fileWorkspaceFolder}`, and `${fileDirname}` are supported."
        },
        "krarkode.source.encoding": {
          "type": "string",
          "default": "UTF-8",
          "description": "Encoding to use when sourcing R files."
        },
        "krarkode.source.echo": {
          "type": "boolean",
          "default": false,
          "description": "Whether to echo commands when sourcing R files."
        },
        "krarkode.plot.viewColumn": {
          "type": "string",
          "default": "Two",
          "enum": [
            "Active",
            "Beside",
            "One",
            "Two",
            "Three",
            "Disable"
          ],
          "description": "View column for plot viewer. Set to 'Disable' to disable the plot viewer."
        },
        "krarkode.plot.maxHistory": {
          "type": "number",
          "default": 50,
          "minimum": 1,
          "maximum": 500,
          "description": "Maximum number of plots to keep in history."
        },
        "krarkode.html.viewColumn": {
          "type": "string",
          "default": "Two",
          "enum": [
            "Active",
            "Beside",
            "One",
            "Two",
            "Three"
          ],
          "description": "View column for HTML viewer (ShowHtmlFile destination=viewer)."
        }
      }
    }
  },
  "scripts": {
    "compile": "esbuild ./src/extension.ts --bundle --outfile=dist/extension.js --external:vscode --platform=node --sourcemap",
    "watch": "esbuild ./src/extension.ts --bundle --outfile=dist/extension.js --external:vscode --platform=node --sourcemap --watch",
    "vscode:prepublish": "pnpm run compile"
  },
  "devDependencies": {
    "@types/node": "^20.11.0",
    "@types/vscode": "^1.75.0",
    "esbuild": "^0.25.9",
    "typescript": "^5.4.0"
  },
  "dependencies": {
    "vscode-languageclient": "^9.0.1"
  }
}
