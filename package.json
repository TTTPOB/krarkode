{
  "name": "krarkode",
  "displayName": "krarkode",
  "description": "Ark-focused VS Code extension",
  "version": "0.0.1",
  "publisher": "tttpob",
  "engines": {
    "vscode": "^1.75.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onLanguage:r",
    "onLanguage:rmd",
    "onCommand:krarkode.createSession",
    "onCommand:krarkode.attachSession",
    "onCommand:krarkode.stopSession",
    "onCommand:krarkode.restartLanguageServer"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "krarkode.createSession",
        "title": "Create Ark Session",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.attachSession",
        "title": "Attach Ark Session",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.stopSession",
        "title": "Stop Ark Session",
        "category": "Krarkode"
      },
      {
        "command": "krarkode.restartLanguageServer",
        "title": "Restart Ark Language Server",
        "category": "Krarkode"
      }
    ],
    "configuration": {
      "type": "object",
      "title": "Krarkode",
      "properties": {
        "krarkode.path": {
          "type": "string",
          "default": "ark",
          "description": "Path to the Ark executable. Leave empty to use PATH."
        },
        "krarkode.sessionMode": {
          "type": "string",
          "default": "console",
          "enum": [
            "console",
            "notebook",
            "background"
          ],
          "description": "Ark session mode to use when starting the kernel."
        },
        "krarkode.sessionsDir": {
          "type": "string",
          "default": "",
          "markdownDescription": "Root directory for Ark session metadata (connection file, announce file). Leave empty to use extension global storage."
        },
        "krarkode.console.driver": {
          "type": "string",
          "default": "tmux",
          "enum": [
            "tmux",
            "external"
          ],
          "description": "Ark kernel driver. Use \"tmux\" to manage Ark kernels in a shared tmux session, or \"external\" for manual kernel management."
        },
        "krarkode.console.commandTemplate": {
          "type": "string",
          "default": "jupyter console --existing {connectionFile}",
          "description": "Command template used to launch a console attached to an Ark connection file."
        },
        "krarkode.kernel.commandTemplate": {
          "type": "string",
          "default": "{arkPath} --connection_file {connectionFile} --session-mode {sessionMode} --startup-file {startupFile}",
          "description": "Command template used to launch an Ark kernel."
        },
        "krarkode.kernel.startupFileTemplate": {
          "type": "string",
          "default": "{sessionsDir}/{name}/init-ark.R",
          "description": "Template for the Ark startup file path."
        },
        "krarkode.lsp.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Whether to start the Ark language server sidecar."
        },
        "krarkode.ipAddress": {
          "type": "string",
          "default": "127.0.0.1",
          "description": "IP address Ark will bind for the language server."
        },
        "krarkode.lspTimeoutMs": {
          "type": "number",
          "default": 15000,
          "description": "Timeout for Ark language server startup (ms)."
        },
        "krarkode.sidecarPath": {
          "type": "string",
          "default": "",
          "description": "Path to the Ark sidecar executable. Leave empty to use bundled binaries."
        },
        "krarkode.tmux.path": {
          "type": "string",
          "default": "tmux",
          "description": "Path to tmux executable. Leave empty to use PATH."
        },
        "krarkode.tmux.manageKernel": {
          "type": "boolean",
          "default": true,
          "description": "Whether to launch Ark kernel inside tmux when creating a session."
        }
      }
    }
  },
  "scripts": {
    "compile": "esbuild ./src/extension.ts --bundle --outfile=dist/extension.js --external:vscode --platform=node --sourcemap",
    "watch": "esbuild ./src/extension.ts --bundle --outfile=dist/extension.js --external:vscode --platform=node --sourcemap --watch",
    "vscode:prepublish": "pnpm run compile"
  },
  "devDependencies": {
    "@types/node": "^20.11.0",
    "@types/vscode": "^1.75.0",
    "esbuild": "^0.25.9",
    "typescript": "^5.4.0"
  },
  "dependencies": {
    "vscode-languageclient": "^9.0.1"
  }
}
